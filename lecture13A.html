<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>

        let cart = ["laptop","mobile","earphone","adaptor"]

        function createOrder(cart){
            console.log("Creating Order....")
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{
                    if(cart.length>0){
                        resolve({
                            orderID:12345,
                            amount:50000

                        })

                    }else{
                        reject("Cart is Empty")
                    }

                },5000)
            })

        }

        function makePayment(order){
            console.log("Initializing Payment...")
            return new Promise((resolve,reject)=>{
                let network = true;
                setTimeout(()=>{
                    if(network===true){
                        resolve({
                            ...order,
                            paymentID:'PAY123'
                        })
                    }else{
                        reject('Payment Failed')
                    }

                },5000)

            })
        }

        function updateInventory(order){

            console.log("Updating Inventory...")
            return new Promise((resolve,reject)=>{
                let inventoryAvailable = true;
                setTimeout(()=>{
                    if(inventoryAvailable){
                        resolve({
                            ...order,
                            inventoryStatus:true
                        })
                    }else{
                        reject("inventory not available")
                    }

                },5000)
            })
        }

        function orderStatus(order){
            console.log("Confirming Order....")
            return new Promise((resolve,reject)=>{
                let message = true;
                setTimeout(()=>{
                    if(message){
                        resolve({
                            ...order,
                            orderStatusKey:"Confirmed"
                        })
                    }else{
                        reject("Order Cancelled");
                    }

                },5000)
            })
        }


        createOrder(cart).then((order)=>{
            console.log("Order Created for ",order)
            return makePayment(order)
        }).then((order)=>{
            console.log("Payment Successfull",order)
            return updateInventory(order)
        }).then((order)=>{
            console.log("updated inverntory",order)
            return orderStatus(order)
        }).then((order)=>{
            console.log(order)
        }).catch(err=>console.log(err))



    </script>
</body>
</html>